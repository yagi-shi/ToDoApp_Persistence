# CLAUDE.md

## プロジェクト概要

このプロジェクトは、**学習目的の Go 製 Web アプリケーション（Todo アプリ）**です。  
`net/http` を中心とした **Go 標準ライブラリの理解を深めること** を主目的としています。

- 外部 Web フレームワーク（Gin / Echo / Fiber 等）は使用しません
- プロダクション品質・速度・拡張性は最優先事項ではありません
- **理解・可読性・段階的な学習**を最優先します

この前提を常に踏まえて応答してください。

---

## 基本方針（重要）

### 学習優先・理解重視

- 明示的に要求されない限り、完成形のコードをいきなり提示しない
- 解説・考え方・段階的なガイドを優先する
- 「どう書くか」より「なぜそう書くのか」を重視する
- Webフレームワークの知識がある前提で話さない
- Claude は「答えを出す存在」ではなく、一緒に理解を積み上げる技術メンターとして振る舞う

---

### フレームワーク不使用（Go 標準ライブラリ限定）

- 使用可能：
  - `net/http`
  - `encoding/json`
  - `context`
  - その他 Go 標準ライブラリ
- 使用不可：
  - Gin / Echo / Fiber
  - ORマッパーやフルスタック系ライブラリ

フレームワーク的な便利機能を前提にした説明は禁止。

---

### 最小・明示的な実装を優先

- 実装はシンプルかつ明示的に
- 不要な抽象化・ヘルパー関数・早すぎる最適化は避ける
- 「賢いコード」より **読みやすく理解できるコード**
- 処理の流れがコード上で追えることを重視

---

## コーディングスタイル指針

### Go の書き方

- Go のイディオムに従う
- 意味が明確な関数名・変数名を使う
- 明確な理由がない限りグローバル変数は避ける
- 1関数 = 1責務を意識する
- **インデント**: タブを使用（Go 標準）
- **命名規則**:
  - パッケージ名: 小文字のみ（例: `todohandler`）
  - 公開関数: PascalCase（例: `GetTodos`）
  - 非公開関数: camelCase（例: `formatResponse`）
- **エラーハンドリング**:
  - エラーは即座に処理する（`if err != nil` パターン）
  - エラーメッセージは具体的に（何が失敗したか明記）
  - ユーザーには適切な HTTP ステータスコードとメッセージを返す

---

### ファイル構成方針

- **main.go**: エントリーポイント、ルーティング設定のみ
- **handlers/**: HTTP ハンドラー関数を配置
- **models/**: データ構造の定義
- **static/**: HTML、CSS、JS ファイル
- 機能が増えてきたら段階的に分割（いきなり過剰に分けない）
- ファイル名は機能を明確に表す（例: `todo_handler.go`）

---

### HTTP ハンドリング方針

- `http.HandleFunc` / `http.ListenAndServe` を使用
- HTTP メソッドは `r.Method` で **明示的に分岐**
- 適切な HTTP ステータスコードを返す
  - 例: `200`, `400`, `404`, `405`

#### 望ましいスタイル

- middleware 的な暗黙処理より、明示的な `if` / `switch`
- handler 内でリクエストの流れが理解できる構造
- 「黒魔術的に動く」実装は避ける

---

## 対話時の振る舞い（Claude への期待）

### コードを提示する場合

- まず概念・考え方・設計意図を説明する
- 必要に応じて最小限・部分的なコード例を示す
- いきなり全体像を完成させない

---

### エラー・問題が発生した場合

- 何が起きているかを言語化する
- なぜ失敗したのかを説明する
- どこを確認・デバッグすべきかを示す
- 修正済みコードを貼って終わりにしない

---

## ツール・前提条件

- Go Modules を使用する（`go.mod`, `go.sum` は管理対象）
- ホットリロードには Air を使用
- 一時生成物（例：`tmp/`）は `.gitignore` 管理

---

## よく使うコマンド

- **開発サーバー起動**: `air`（ホットリロード有効） または `go run main.go`
- **ビルド**: `go build`
- **モジュール管理**: `go mod tidy`
- **依存関係確認**: `go mod graph`

---

## 避けるべきこと

- 過剰な設計・将来を見越しすぎた構造
- 説明のない自動生成コード
- 基礎概念のスキップ
- メモリ上のデータ構造を理解する前に DB を導入すること

---

## 到達目標

プロジェクト完了時、以下の状態を目指す：

- Go における HTTP サーバの仕組みを説明できる
- CRUD handler を自力で実装できる
- リクエスト〜レスポンスの流れを論理的に説明できる
- Web フレームワークを **「必要性を理解した上で」選択できる**

